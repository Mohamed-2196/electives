{% extends 'courses/base.html' %}

{% block title %}Browse {{ elective_type.name }}{% endblock %}

{% block header %}Browse Courses{% endblock %}

{% block content %}
<a href="{% url 'home' %}" class="back-button">← Back to Home</a>

<div class="info-box">
    <h2>{{ elective_type.name }}</h2>
    <p>{{ elective_type.description }}</p>
</div>

{% if courses %}
<div class="course-grid">
    {% for course in courses %}
    <div class="course-card">
        <div class="course-header">
            <span class="course-code">{{ course.code }}</span>
            {% if course.total_points %}
            <span class="course-points">{{ course.total_points }} pts</span>
            {% endif %}
            <h3 class="course-title">{{ course.name }}</h3>
            <p class="course-description">{{ course.description }}</p>
        </div>

        <div class="course-details">
            <div class="detail-item">
                <span class="detail-label">Credits:</span>
                <span class="detail-value">{{ course.credits }}</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">Level:</span>
                <span class="detail-value">{{ course.level }}</span>
            </div>
            {% if course.prerequisites %}
            <div class="detail-item">
                <span class="detail-label">
                    Prerequisites:
                    <span class="info-icon" data-tooltip="Prerequisites&#10;You should have taken the following courses, or you can take them&#10;as your second elective (if they're available as electives).&#10;Lower-level prerequisites can also be taken in the same year.">?</span>
                </span>
                <span class="detail-value">{{ course.prerequisites }}</span>
            </div>
            {% endif %}
            {% if course.corequisites %}
            <div class="detail-item">
                <span class="detail-label">
                    Corequisites:
                    <span class="info-icon" data-tooltip="Corequisites&#10;Same-level courses that must be taken together in the same year.&#10;You should take these as your other elective (if available).">?</span>
                </span>
                <span class="detail-value">{{ course.corequisites }}</span>
            </div>
            {% endif %}
            {% if course.exclusions %}
            <div class="detail-item">
                <span class="detail-label">
                    Exclusions:
                    <span class="info-icon" data-tooltip="Exclusions&#10;Courses that cannot be taken with this module due to content overlap.&#10;If you've taken an excluded course, you cannot take this one.">?</span>
                </span>
                <span class="detail-value">{{ course.exclusions }}</span>
            </div>
            {% endif %}
            <div class="detail-item">
                <span class="detail-label">
                    Mode:
                    <span class="info-icon" data-tooltip="Delivery Mode&#10;• LT: Lead Teaching (on-campus)&#10;• ILR: Independent Learning Route (distance)&#10;• OT: Online Teaching (fully online)">?</span>
                </span>
                <span class="detail-value">{{ course.mode }}</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">Assessment:</span>
                <span class="detail-value">{{ course.assessment }}</span>
            </div>
            {% if course.study_guide_url %}
            <div class="detail-item">
                <span class="detail-label"></span>
                <a href="{{ course.study_guide_url }}" target="_blank" class="links">Study Guide →</a>
            </div>
            {% endif %}
            {% if course.course_description_url %}
            <div class="detail-item">
                <span class="detail-label"></span>
                <a href="{{ course.course_description_url }}" target="_blank" class="links">Course Description →</a>
            </div>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="info-box">
    <p>No courses available for this elective type.</p>
</div>
{% endif %}
{% endblock %}
